require "spec_helper"

describe "Enhanced Select" do
  include ActionView::Helpers::FormOptionsHelper

  before :each do
    @standard_options = [
      {text: "One", value: 1},
      {text: "Two", value: 2},
      {text: "Three", value: 3}
    ]
    @enhanced_options = [
      {text: "One", value: 1, "data-url" => "/tasks/1"},
      {text: "Two", value: 2, "data-url" => "/tasks/2"},
      {text: "Three", value: 3, "data-url" => "/tasks/3"}
    ]
  end

  describe ".enhanced_options_for_select" do
  	it "constructs options with text and values" do
  	 enhanced_date_select(:birthday,{ :prompt => {
            :day => "please select one",
            :month => "please select one",
            :year => "please select one" },
          :value => {:year => 2001, :month => 2, :day => 3},
          :order => [:day, :month, :year],
          :start_year => Time.now.year,
          :end_year => 1940 } ).should == "<select id=\"birthday_{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_1i\" name=\"birthday[{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(1i)]\">\n<option value=\"2007\">2007</option>\n<option value=\"2008\">2008</option>\n<option value=\"2009\">2009</option>\n<option value=\"2010\">2010</option>\n<option value=\"2011\">2011</option>\n<option selected=\"selected\" value=\"2012\">2012</option>\n<option value=\"2013\">2013</option>\n<option value=\"2014\">2014</option>\n<option value=\"2015\">2015</option>\n<option value=\"2016\">2016</option>\n<option value=\"2017\">2017</option>\n</select>\n<select id=\"birthday_{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_2i\" name=\"birthday[{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(2i)]\">\n<option value=\"1\">January</option>\n<option value=\"2\">February</option>\n<option value=\"3\">March</option>\n<option value=\"4\">April</option>\n<option value=\"5\">May</option>\n<option value=\"6\">June</option>\n<option value=\"7\">July</option>\n<option value=\"8\">August</option>\n<option value=\"9\">September</option>\n<option selected=\"selected\" value=\"10\">October</option>\n<option value=\"11\">November</option>\n<option value=\"12\">December</option>\n</select>\n<select id=\"birthday_{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_3i\" name=\"birthday[{:prompt=&gt;{:day=&gt;&quot;please select one&quot;, :month=&gt;&quot;please select one&quot;, :year=&gt;&quot;please select one&quot;}, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(3i)]\">\n<option value=\"1\">1</option>\n<option value=\"2\">2</option>\n<option value=\"3\">3</option>\n<option value=\"4\">4</option>\n<option value=\"5\">5</option>\n<option value=\"6\">6</option>\n<option value=\"7\">7</option>\n<option value=\"8\">8</option>\n<option value=\"9\">9</option>\n<option value=\"10\">10</option>\n<option value=\"11\">11</option>\n<option value=\"12\">12</option>\n<option value=\"13\">13</option>\n<option value=\"14\">14</option>\n<option selected=\"selected\" value=\"15\">15</option>\n<option value=\"16\">16</option>\n<option value=\"17\">17</option>\n<option value=\"18\">18</option>\n<option value=\"19\">19</option>\n<option value=\"20\">20</option>\n<option value=\"21\">21</option>\n<option value=\"22\">22</option>\n<option value=\"23\">23</option>\n<option value=\"24\">24</option>\n<option value=\"25\">25</option>\n<option value=\"26\">26</option>\n<option value=\"27\">27</option>\n<option value=\"28\">28</option>\n<option value=\"29\">29</option>\n<option value=\"30\">30</option>\n<option value=\"31\">31</option>\n</select>\n"
    end

  	it "construct options with text, values, and data* attributes" do
  	  	 enhanced_date_select(:birthday,{ :discard_day =>true,
          :value => {:year => 2001, :month => 2, :day => 3},
          :order => [:day, :month, :year],
          :start_year => Time.now.year,
          :end_year => 1940 } ).should =="<select id=\"birthday_{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_1i\" name=\"birthday[{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(1i)]\">\n<option value=\"2007\">2007</option>\n<option value=\"2008\">2008</option>\n<option value=\"2009\">2009</option>\n<option value=\"2010\">2010</option>\n<option value=\"2011\">2011</option>\n<option selected=\"selected\" value=\"2012\">2012</option>\n<option value=\"2013\">2013</option>\n<option value=\"2014\">2014</option>\n<option value=\"2015\">2015</option>\n<option value=\"2016\">2016</option>\n<option value=\"2017\">2017</option>\n</select>\n<select id=\"birthday_{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_2i\" name=\"birthday[{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(2i)]\">\n<option value=\"1\">January</option>\n<option value=\"2\">February</option>\n<option value=\"3\">March</option>\n<option value=\"4\">April</option>\n<option value=\"5\">May</option>\n<option value=\"6\">June</option>\n<option value=\"7\">July</option>\n<option value=\"8\">August</option>\n<option value=\"9\">September</option>\n<option selected=\"selected\" value=\"10\">October</option>\n<option value=\"11\">November</option>\n<option value=\"12\">December</option>\n</select>\n<select id=\"birthday_{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;_:day, :month, :year, :start_year=&gt;2012, :end_year=&gt;1940}_3i\" name=\"birthday[{:discard_day=&gt;true, :value=&gt;{:year=&gt;2001, :month=&gt;2, :day=&gt;3}, :order=&gt;[:day, :month, :year], :start_year=&gt;2012, :end_year=&gt;1940}(3i)]\">\n<option value=\"1\">1</option>\n<option value=\"2\">2</option>\n<option value=\"3\">3</option>\n<option value=\"4\">4</option>\n<option value=\"5\">5</option>\n<option value=\"6\">6</option>\n<option value=\"7\">7</option>\n<option value=\"8\">8</option>\n<option value=\"9\">9</option>\n<option value=\"10\">10</option>\n<option value=\"11\">11</option>\n<option value=\"12\">12</option>\n<option value=\"13\">13</option>\n<option value=\"14\">14</option>\n<option selected=\"selected\" value=\"15\">15</option>\n<option value=\"16\">16</option>\n<option value=\"17\">17</option>\n<option value=\"18\">18</option>\n<option value=\"19\">19</option>\n<option value=\"20\">20</option>\n<option value=\"21\">21</option>\n<option value=\"22\">22</option>\n<option value=\"23\">23</option>\n<option value=\"24\">24</option>\n<option value=\"25\">25</option>\n<option value=\"26\">26</option>\n<option value=\"27\">27</option>\n<option value=\"28\">28</option>\n<option value=\"29\">29</option>\n<option value=\"30\">30</option>\n<option value=\"31\">31</option>\n</select>\n"
    end
  end
end
